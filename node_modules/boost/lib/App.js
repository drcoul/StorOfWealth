'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _vorpal = require('vorpal');

var _vorpal2 = _interopRequireDefault(_vorpal);

var _Command = require('./Command');

var _Command2 = _interopRequireDefault(_Command);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @copyright   2017, Miles Johnson
 * @license     https://opensource.org/licenses/MIT
 * 
 */

const APP_NAME_PATTERN = /^[a-z-]+$/;

class App {

  constructor(name) {
    if (!name || typeof name !== 'string') {
      throw new Error('A unique application name is required for Boost.');
    } else if (!name.match(APP_NAME_PATTERN)) {
      throw new Error('Invalid application name. May only contain dashes and lowercase characters.');
    }

    this.name = name;
    this.vorpal = new _vorpal2.default();
  }

  command(format, description = '') {
    return new _Command2.default(this.name, this.vorpal.command(format, description));
  }

  run() {
    this.vorpal.delimiter(`${this.name}$ `).parse(process.argv);

    return this;
  }
}
exports.default = App;